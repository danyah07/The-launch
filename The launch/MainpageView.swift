//
//  MainpageView.swift
//  The launch
//
//  Created by Aryam on 30/09/2025.
import SwiftUI

// ==============================
// ÿßŸÖÿ™ÿØÿßÿØ ŸÑÿ™ÿ≠ŸàŸäŸÑ HEX ÿ•ŸÑŸâ ÿ£ŸÑŸàÿßŸÜ Color
// ==============================
extension Collection {
    subscript(safe index: Index) -> Element? {
        return indices.contains(index) ? self[index] : nil
    }
}

// ==============================
// ŸáŸäŸÉŸÑ Habit ŸäŸÖÿ´ŸÑ ÿπÿßÿØÿ© Ÿàÿßÿ≠ÿØÿ©
// ==============================
struct Habit: Identifiable {
    let id = UUID()
    var name: String
    var emoji: String
    var progress: Int
    var goal: Int
    var isChecked: Bool = false
}

// ==============================
// ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ŸÑŸÑÿ™ÿ∑ÿ®ŸäŸÇ
// ==============================
struct NView: View {
    @State private var habits: [Habit] = []
    var body: some View {
       NavigationStack {ContentView1(habits: $habits)}
    }
}

// ==============================
// ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ£ŸàŸÑŸâ ŸÑÿπÿ±ÿ∂ ÿßŸÑÿπÿßÿØÿßÿ™ ŸàÿßŸÑÿ™ŸÇŸàŸäŸÖ
// ==============================
struct ContentView1: View {
    @Binding var habits: [Habit]
    @State private var selectedTab = "Calendar"
    @State private var selectedDate: Date? = nil
    @State private var currentWeekIndex = 4
    @State private var showCompletionAlert = false
    @State private var showContentView2 = false
    @State private var showReflectionView = false // ŸÑŸÑÿ™ÿ≠ŸÉŸÖ ÿ®ŸÅÿ™ÿ≠ ÿµŸÅÿ≠ÿ© ReflectionView
    
   // @State private var showReflectionView = false
        @State private var savedAnswers: [String: String] = [:]
        @State private var showHistory = false
        @State private var completedHabit: Habit? = nil
    
    let calendar = Calendar.current
    let weekDays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]
    
    var startOfWeek: Date {
        let components = calendar.dateComponents([.yearForWeekOfYear, .weekOfYear], from: Date())
        return calendar.date(from: components)!
    }
    
    var weeks: [[Date]] {
        var allWeeks: [[Date]] = []
        for weekOffset in -4...4 {
            var week: [Date] = []
            if let weekStart = calendar.date(byAdding: .weekOfYear, value: weekOffset, to: startOfWeek) {
                for day in 0..<7 {
                    if let date = calendar.date(byAdding: .day, value: day, to: weekStart) {
                        week.append(date)
                    }
                }
            }
            allWeeks.append(week)
        }
        return allWeeks
    }
    
    func monthYear(for date: Date) -> String {
        let formatter = DateFormatter()
        formatter.dateFormat = "MMM yyyy"
        return formatter.string(from: date)
    }
    
    let amberColor = Color(hex: "94B6E7")
    
    var body: some View {
        VStack {
            HStack {
                Text(monthYear(for: selectedDate ?? Date()))
                    .font(.title)
                    .fontWeight(.semibold)
                    .padding(.leading, 20)
                
                Spacer()
                
                // ÿ≤ÿ± ÿßŸÑÿ•ÿ∂ÿßŸÅÿ©
                Button {
                    showContentView2.toggle()
                } label: {
                    Image(systemName: "plus.circle")
                        .font(.title2)
                        .foregroundColor(amberColor)
                        .padding(.trailing, 20)
                }
                .fullScreenCover(isPresented: $showContentView2) {
                    ContentView2(habits: $habits)
                }
            }
            .padding(.top, 15)
            
            Divider()
            
            HStack(spacing: 0.1) {
                ForEach(weekDays, id: \.self) { day in
                    Text(day)
                        .font(.headline)
                        .frame(maxWidth: .infinity)
                }
            }
            .padding(.top, 10)
            
            TabView(selection: $currentWeekIndex) {
                ForEach(weeks.indices, id: \.self) { index in
                    HStack(spacing: 15) {
                        ForEach(weeks[index], id: \.self) { date in
                            let dayNumber = calendar.component(.day, from: date)
                            VStack(spacing: 4) {
                                Circle()
                                    .fill(selectedDate != nil && calendar.isDate(selectedDate!, inSameDayAs: date) ? Color(hex: "345889") : Color(hex: "94B6E7"))
                                    .frame(width: 40, height: 40)
                                    .overlay(Text("\(dayNumber)").foregroundColor(.white))
                                    .onTapGesture {
                                        selectedDate = date
                                    }
                                
                                if calendar.isDate(date, inSameDayAs: Date()) {
                                    Circle().fill(Color.black).frame(width: 6, height: 6)
                                } else {
                                    Spacer().frame(height: 6)
                                }
                            }
                        }
                    }
                    .tag(index)
                }
            }
            .tabViewStyle(PageTabViewStyle(indexDisplayMode: .never))
            .frame(height: 70)
            
            Divider()
            
            List {
                ForEach(habits.indices, id: \.self) { index in
                    let isMissed = !habits[index].isChecked && !Calendar.current.isDateInToday(Date())
                    
                    HStack {
                        HStack(spacing: 12) {
                            Text(habits[index].emoji)
                                .font(.title2)
                            VStack(alignment: .leading, spacing: 4) {
                                Text(habits[index].name)
                                    .font(.body)
                                if isMissed {
                                    Text("you missed 1 days")
                                        .font(.caption2)
                                        .foregroundColor(.red)
                                }
                            }
                        }
                        
                        Spacer()
                        
                        VStack(spacing: 4) {
                            HStack(spacing: 4) {
                                Text("üî•").font(.caption)
        Button(action: {
                if !habits[index].isChecked && habits[index].progress < habits[index].goal {
                    habits[index].progress += 1
                   habits[index].isChecked = true
if habits[index].progress >= habits[index].goal {
    completedHabit = habits[index]
showCompletionAlert = true
                                        }
                                    }
                                }) {
                                    Image(systemName: habits[index].isChecked ? "checkmark.circle.fill" : "circle")
                                        .font(.title2)
                                        .foregroundColor(habits[index].isChecked ? .green : (isMissed ? .red : .gray))
                                }
                            }
                            Text("\(habits[index].progress)/\(habits[index].goal)")
                                .font(.caption)
                                .foregroundColor(.gray)
                        }
                    }
                    .padding()
                    .background(isMissed ? Color.red.opacity(0.2) : Color(hex: "94B6E7").opacity(0.12))
                    .cornerRadius(12)
                    .padding(.horizontal, 8)
                }
                .onDelete { indexSet in
                    habits.remove(atOffsets: indexSet)
                }
            }
            .listStyle(PlainListStyle())
            
            Spacer()
        }
       .alert("üéâ You've finished", isPresented: $showCompletionAlert) {
           
            Button("Reflection", role: .cancel) {showReflectionView = true}
        } message: {
            Text("your streak successfully")
        }
        .sheet(isPresented: $showReflectionView) {
            JView()
        }
    }
}

// ==============================
// ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ´ÿßŸÜŸäÿ© ŸÑÿ•ÿ∂ÿßŸÅÿ© ÿπÿßÿØÿ© ÿ¨ÿØŸäÿØÿ©
// ==============================
struct ContentView2: View {
    @Binding var habits: [Habit]
    @Environment(\.dismiss) var dismiss
    @State private var habitName: String = ""
    @State private var selectedEmoji: String = "üá∏üá¶"
    @State private var isEditingEmoji: Bool = false
    @State private var startDate: Date = Date()
    @State private var showDatePicker: Bool = false
    @State private var streak: Int = 1
    @State private var dailyNotification: Bool = false
    @State private var notificationTime: Date = Date()
    
    private let allEmojis: [String] = ["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","ü•π","üòÖ","üòÇ","ü§£","ü•≤","‚ò∫Ô∏è","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü•∏","ü§©","ü•≥","üôÇ‚Äç‚ÜïÔ∏è","üòè","üòí","üôÇ‚Äç‚ÜîÔ∏è","üòû","üòî","üòü","üòï","üôÅ","‚òπÔ∏è","üò£","üòñ","üò´","üò©","ü•∫","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò∂‚Äçüå´Ô∏è","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü´£","ü§≠","ü´¢","ü´°","ü§´","ü´†","ü§•","üò∂","ü´•","üòê","ü´§","üòë","ü´®","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤","ü•±","ü´©","üò¥","ü§§","üò™","üòÆ‚Äçüí®","üòµ","üòµ‚Äçüí´","ü§ê","ü•¥","ü§¢","ü§Æ","ü§ß","üò∑","ü§í","ü§ï","ü§ë","ü§†","üòà","üëø","üëπ","üë∫","ü§°","üí©","üëª","üíÄ","‚ò†Ô∏è","üëΩ","üëæ","ü§ñ","üéÉ","üò∫","üò∏","üòπ","üòª","üòº","üòΩ","üôÄ","üòø","üòæ","ü´∂","ü§≤","üëê","üôå","üëè","ü§ù","üëç","üëé","üëä","‚úä","ü§õ","ü§ú","ü´∑","ü´∏","ü§û","‚úåÔ∏è","ü´∞","ü§ü","ü§ò","üëå","ü§å","ü§è","ü´≥","ü´¥","üëà","üëâ","üëÜ","üëá","‚òùÔ∏è","‚úã","ü§ö","üñêÔ∏è","üññ","üëã","ü§ô","ü´≤","ü´±","üí™","ü¶æ","üñï","‚úçÔ∏è","üôè","ü´µ","ü¶∂","ü¶µ","ü¶ø","üíÑ","üíã","üëÑ","ü´¶","ü¶∑","üëÖ","üëÇ","ü¶ª","üëÉ","ü´Ü","üë£","üëÅÔ∏è","üëÄ","ü´Ä","ü´Å","üß†","üó£Ô∏è","üë§","üë•","ü´Ç","üë∂","üëß","üßí","üë¶","üë©","üßë","üë®","üë©‚Äçü¶±","üßë‚Äçü¶±","üë®‚Äçü¶±","üë©‚Äçü¶∞","üßë‚Äçü¶∞","üë®‚Äçü¶∞","üë±‚Äç‚ôÄÔ∏è","üë±","üë±‚Äç‚ôÇÔ∏è","üë©‚Äçü¶≥","üßë‚Äçü¶≥","üë®‚Äçü¶≥","üë©‚Äçü¶≤","üßë‚Äçü¶≤","üë®‚Äçü¶≤","üßî‚Äç‚ôÄÔ∏è","üßî","üßî‚Äç‚ôÇÔ∏è","üëµ","üßì","üë¥","üë≤","üë≥‚Äç‚ôÄÔ∏è","üë≥","üë≥‚Äç‚ôÇÔ∏è","üßï","üëÆ‚Äç‚ôÄÔ∏è","üëÆ","üëÆ‚Äç‚ôÇÔ∏è","üë∑‚Äç‚ôÄÔ∏è","üë∑","üë∑‚Äç‚ôÇÔ∏è","üíÇ‚Äç‚ôÄÔ∏è","üíÇ","üíÇ‚Äç‚ôÇÔ∏è","üïµÔ∏è‚Äç‚ôÄÔ∏è","üïµÔ∏è","üïµÔ∏è‚Äç‚ôÇÔ∏è","üë©‚Äç‚öïÔ∏è","üßë‚Äç‚öïÔ∏è","üë®‚Äç‚öïÔ∏è","üë©‚Äçüåæ","üßë‚Äçüåæ","üë®‚Äçüåæ","üë©‚Äçüç≥","üßë‚Äçüç≥","üë®‚Äçüç≥","üë©‚Äçüéì","üßë‚Äçüéì","üë®‚Äçüéì","üë©‚Äçüé§","üßë‚Äçüé§","üë®‚Äçüé§","üë©‚Äçüè´","üßë‚Äçüè´","üë®‚Äçüè´","üë©‚Äçüè≠","üßë‚Äçüè≠","üë®‚Äçüè≠","üë©‚Äçüíª","üßë‚Äçüíª","üë®‚Äçüíª","üë©‚Äçüíº","üßë‚Äçüíº","üë®‚Äçüíº","üë©‚Äçüîß","üßë‚Äçüîß","üë®‚Äçüîß","üë©‚Äçüî¨","üßë‚Äçüî¨","üë®‚Äçüî¨","üë©‚Äçüé®","üßë‚Äçüé®","üë®‚Äçüé®","üë©‚Äçüöí","üßë‚Äçüöí","üë®‚Äçüöí","üë©‚Äç‚úàÔ∏è","üßë‚Äç‚úàÔ∏è","üë®‚Äç‚úàÔ∏è","üë©‚ÄçüöÄ","üßë‚ÄçüöÄ","üë®‚ÄçüöÄ","üë©‚Äç‚öñÔ∏è","üßë‚Äç‚öñÔ∏è","üë®‚Äç‚öñÔ∏è","üë∞‚Äç‚ôÄÔ∏è","üë∞","üë∞‚Äç‚ôÇÔ∏è","ü§µ‚Äç‚ôÄÔ∏è","ü§µ","ü§µ‚Äç‚ôÇÔ∏è","üë∏","ü´Ö","ü§¥","ü•∑","ü¶∏‚Äç‚ôÄÔ∏è","ü¶∏","ü¶∏‚Äç‚ôÇÔ∏è","ü¶π‚Äç‚ôÄÔ∏è","ü¶π","ü¶π‚Äç‚ôÇÔ∏è","ü§∂","üßë‚ÄçüéÑ","üéÖ","üßô‚Äç‚ôÄÔ∏è","üßô","üßô‚Äç‚ôÇÔ∏è","üßù‚Äç‚ôÄÔ∏è","üßù","üßù‚Äç‚ôÇÔ∏è","üßå","üßõ‚Äç‚ôÄÔ∏è","üßõ","üßõ‚Äç‚ôÇÔ∏è","üßü‚Äç‚ôÄÔ∏è","üßü","üßü‚Äç‚ôÇÔ∏è","üßû‚Äç‚ôÄÔ∏è","üßû","üßû‚Äç‚ôÇÔ∏è","üßú‚Äç‚ôÄÔ∏è","üßú","üßú‚Äç‚ôÇÔ∏è","üßö‚Äç‚ôÄÔ∏è","üßö","üßö‚Äç‚ôÇÔ∏è","üëº","ü§∞","ü´Ñ","ü´É","ü§±","üë©‚Äçüçº","üßë‚Äçüçº","üë®‚Äçüçº","üôá‚Äç‚ôÄÔ∏è","üôá","üôá‚Äç‚ôÇÔ∏è","üíÅ‚Äç‚ôÄÔ∏è","üíÅ","üíÅ‚Äç‚ôÇÔ∏è","üôÖ‚Äç‚ôÄÔ∏è","üôÖ","üôÖ‚Äç‚ôÇÔ∏è","üôÜ‚Äç‚ôÄÔ∏è","üôÜ","üôÜ‚Äç‚ôÇÔ∏è","üôã‚Äç‚ôÄÔ∏è","üôã","üôã‚Äç‚ôÇÔ∏è","üßè‚Äç‚ôÄÔ∏è","üßè","üßè‚Äç‚ôÇÔ∏è","ü§¶‚Äç‚ôÄÔ∏è","ü§¶","ü§¶‚Äç‚ôÇÔ∏è","ü§∑‚Äç‚ôÄÔ∏è","ü§∑","ü§∑‚Äç‚ôÇÔ∏è","üôé‚Äç‚ôÄÔ∏è","üôé","üôé‚Äç‚ôÇÔ∏è","üôç‚Äç‚ôÄÔ∏è","üôç","üôç‚Äç‚ôÇÔ∏è","üíá‚Äç‚ôÄÔ∏è","üíá","üíá‚Äç‚ôÇÔ∏è","üíÜ‚Äç‚ôÄÔ∏è","üíÜ","üíÜ‚Äç‚ôÇÔ∏è","üßñ‚Äç‚ôÄÔ∏è","üßñ","üßñ‚Äç‚ôÇÔ∏è","üíÖüèª","ü§≥","üíÉüèª","üï∫","üëØ‚Äç‚ôÄÔ∏è","üëØ","üëØ‚Äç‚ôÇÔ∏è","üï¥Ô∏è","üë©‚Äçü¶Ω","üßë‚Äçü¶Ω","üë®‚Äçü¶Ω","üë©‚Äçü¶Ω‚Äç‚û°Ô∏è","üßë‚Äçü¶Ω‚Äç‚û°Ô∏è","üë®‚Äçü¶Ω‚Äç‚û°Ô∏è","üë©‚Äçü¶º","üßë‚Äçü¶º","üë®‚Äçü¶º","üë©‚Äçü¶º‚Äç‚û°Ô∏è","üßë‚Äçü¶º‚Äç‚û°Ô∏è","üë®‚Äçü¶º‚Äç‚û°Ô∏è","üö∂‚Äç‚ôÄÔ∏è","üö∂","üö∂‚Äç‚ôÇÔ∏è","üö∂‚Äç‚ôÄÔ∏è‚Äç‚û°Ô∏è","üö∂‚Äç‚û°Ô∏è","üö∂‚Äç‚ôÇÔ∏è‚Äç‚û°Ô∏è","üë©‚Äçü¶Ø","üßë‚Äçü¶Ø","üë®‚Äçü¶Ø","üë©‚Äçü¶Ø‚Äç‚û°Ô∏è","üßë‚Äçü¶Ø‚Äç‚û°Ô∏è","üë®‚Äçü¶Ø‚Äç‚û°Ô∏è","üßé‚Äç‚ôÄÔ∏è","üßé","üßé‚Äç‚ôÇÔ∏è","üèÉ‚Äç‚ôÄÔ∏è","üèÉ","üèÉ‚Äç‚ôÇÔ∏è","üèÉ‚Äç‚ôÄÔ∏è‚Äç‚û°Ô∏è","üèÉ‚Äç‚û°Ô∏è","üèÉ‚Äç‚ôÇÔ∏è‚Äç‚û°Ô∏è","üßé‚Äç‚ôÄÔ∏è‚Äç‚û°Ô∏è","üßé‚Äç‚û°Ô∏è","üßé‚Äç‚ôÇÔ∏è‚Äç‚û°Ô∏è","üßç‚Äç‚ôÄÔ∏è","üßç","üßç‚Äç‚ôÇÔ∏è","üë´","üë≠","üë¨","üë©‚Äç‚ù§Ô∏è‚Äçüë®","üë©‚Äç‚ù§Ô∏è‚Äçüë©","üßë‚Äç‚ù§Ô∏è‚Äçüßë","üë®‚Äç‚ù§Ô∏è‚Äçüë®","üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë®","üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë©","üßë‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüßë","üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë®","ü™¢","üß∂","üßµ","ü™°","üß•","ü•º","ü¶∫","üëö","üëï","üëñ","ü©≤","ü©≥","üëî","üëó","üëô","ü©±","üëò","ü•ª","ü©¥","ü•ø","üë†","üë°","üë¢","üëû","üëü","ü•æ","üß¶","üß§","üß£","üé©","üß¢","üëí","üéì","‚õëÔ∏è","ü™ñ","üëë","üíç","üëù","üëõ","üëú","üíº","üéí","üß≥","üëì","üï∂Ô∏è","ü•Ω","üåÇ","üê∂","üê±","üê≠","üêπ","üê∞","ü¶ä","üêª","üêº","üêª‚Äç‚ùÑÔ∏è","üê®","üêØ","ü¶Å","üêÆ","üê∑","üêΩ","üê∏","üêµ","üôà","üôâ","üôä","üêí","üêî","üêß","üê¶","üê§","üê£","üê•","ü™ø","ü¶Ü","üê¶‚Äç‚¨õ","ü¶Ö","ü¶â","ü¶á","üê∫","üêó","üê¥","ü¶Ñ","ü´é","üêù","ü™±","üêõ","ü¶ã","üêå","üêû","üêú","ü™∞","ü™≤","ü™≥","ü¶ü","ü¶ó","üï∑Ô∏è","üï∏Ô∏è","ü¶Ç","üê¢","üêç","ü¶é","ü¶ñ","ü¶ï","üêô","ü¶ë","ü™º","ü¶ê","ü¶û","ü¶Ä","üê°","üê†","üêü","üê¨","üê≥","üêã","ü¶à","ü¶≠","üêä","üêÖ","üêÜ","ü¶ì","ü¶ç","ü¶ß","ü¶£","üêò","ü¶õ","ü¶è","üê™","üê´","ü¶í","ü¶ò","ü¶¨","üêÉ","üêÇ","üêÑ","ü´è","üêé","üêñ","üêè","üêë","ü¶ô","üêê","ü¶å","üêï","üê©","ü¶Æ","üêï‚Äçü¶∫","üêà","üêà‚Äç‚¨õ","ü™∂","ü™Ω","üêì","ü¶É","ü¶§","ü¶ö","ü¶ú","ü¶¢","ü¶©","üïäÔ∏è","üêá","ü¶ù","ü¶®","ü¶°","ü¶´","ü¶¶","ü¶•","üêÅ","üêÄ","üêøÔ∏è","ü¶î","üêæ","üêâ","üê≤","üê¶‚Äçüî•","üåµ","üéÑ","üå≤","üå≥","üå¥","ü™æ","ü™µ","üå±","üåø","‚òòÔ∏è","üçÄ","üéç","ü™¥","üéã","üçÉ","üçÇ","üçÅ","ü™∫","ü™π","üçÑ","üçÑ‚Äçüü´","üêö","ü™∏","ü™®","üåæ","üíê","üå∑","üåπ","ü•Ä","ü™ª","ü™∑","üå∫","üå∏","üåº","üåª","üåû","üåù","üåõ","üåú","üåö","üåï","üåñ","üåó","üåò","üåë","üåí","üåì","üåî","üåô","üåé","üåç","üåè","ü™ê","üí´","‚≠êÔ∏è","üåü","‚ú®","‚ö°Ô∏è","‚òÑÔ∏è","üí•","üî•","üå™Ô∏è","üåà","‚òÄÔ∏è","üå§Ô∏è","‚õÖÔ∏è","üå•Ô∏è","‚òÅÔ∏è","üå¶Ô∏è","üåßÔ∏è","‚õàÔ∏è","üå©Ô∏è","üå®Ô∏è","‚ùÑÔ∏è","‚òÉÔ∏è","‚õÑÔ∏è","üå¨Ô∏è","üí®","üíß","üí¶","ü´ß","‚òîÔ∏è","‚òÇÔ∏è","üåä","üå´Ô∏è","üçè","üçé","üçê","üçä","üçã","üçã‚Äçüü©","üçå","üçâ","üçá","üçì","ü´ê","üçà","üçí","üçë","ü•≠","üçç","ü••","ü•ù","üçÖ","üçÜ","ü•ë","ü´õ","ü•¶","ü•¨","ü•í","üå∂Ô∏è","ü´ë","üåΩ","ü•ï","ü´í","üßÑ","üßÖ","ü•î","ü´ú","üç†","ü´ö","ü•ê","ü•Ø","üçû","ü•ñ","ü•®","üßÄ","ü•ö","üç≥","üßà","ü•û","üßá","ü•ì","ü•©","üçó","üçñ","ü¶¥","üå≠","üçî","üçü","üçï","ü´ì","ü•™","ü•ô","üßÜ","üåÆ","üåØ","ü´î","ü•ó","ü•ò","ü´ï","ü•´","ü´ô","üçù","üçú","üç≤","üçõ","üç£","üç±","ü•ü","ü¶™","üç§","üçô","üçö","üçò","üç•","ü•†","ü•Æ","üç¢","üç°","üçß","üç®","üç¶","ü•ß","üßÅ","üç∞","üéÇ","üçÆ","üç≠","üç¨","üç´","üçø","üç©","üç™","üå∞","ü•ú","ü´ò","üçØ","ü•õ","ü´ó","üçº","ü´ñ","‚òïÔ∏è","üçµ","üßÉ","ü•§","üßã","üç∂","üç∫","üçª","ü•Ç","üç∑","ü•É","üç∏","üçπ","üßâ","üçæ","üßä","ü•Ñ","üç¥","üçΩÔ∏è","ü•£","ü•°","ü•¢","üßÇ",
                                       "‚öΩÔ∏è","üèÄ","üèà","‚öæÔ∏è","ü•é","üéæ","üèê","üèâ","ü•è","üé±","ü™Ä","üèì","üè∏","üèí","üèë","ü•ç","üèè","ü™É","ü•Ö","‚õ≥Ô∏è","ü™Å","üõù","üèπ","üé£","ü§ø","ü•ä","ü•ã","üéΩ","üõπ","üõº","üõ∑","‚õ∏Ô∏è","ü•å","üéø","‚õ∑Ô∏è","üèÇ","ü™Ç","üèãÔ∏è‚Äç‚ôÄÔ∏è","üèãÔ∏è","üèãÔ∏è‚Äç‚ôÇÔ∏è","ü§º‚Äç‚ôÄÔ∏è","ü§º","ü§º‚Äç‚ôÇÔ∏è","ü§∏‚Äç‚ôÄÔ∏è","ü§∏","ü§∏‚Äç‚ôÇÔ∏è","‚õπÔ∏è‚Äç‚ôÄÔ∏è","‚õπÔ∏è","‚õπÔ∏è‚Äç‚ôÇÔ∏è","ü§∫","ü§æ‚Äç‚ôÄÔ∏è","ü§æ","ü§æ‚Äç‚ôÇÔ∏è","üèåÔ∏è‚Äç‚ôÄÔ∏è","üèåÔ∏è","üèåÔ∏è‚Äç‚ôÇÔ∏è","üèáüèø","üèá","üßò‚Äç‚ôÄÔ∏è","üßò","üßò‚Äç‚ôÇÔ∏è","üèÑ‚Äç‚ôÄÔ∏è","üèÑ","üèÑ‚Äç‚ôÇÔ∏è","üèä‚Äç‚ôÄÔ∏è","üèä","üèä‚Äç‚ôÇÔ∏è","ü§Ω‚Äç‚ôÄÔ∏è","ü§Ω","ü§Ω‚Äç‚ôÇÔ∏è","üö£‚Äç‚ôÄÔ∏è","üö£","üö£‚Äç‚ôÇÔ∏è","üßó‚Äç‚ôÄÔ∏è","üßó","üßó‚Äç‚ôÇÔ∏è","üöµ‚Äç‚ôÄÔ∏è","üöµ","üöµ‚Äç‚ôÇÔ∏è","üö¥‚Äç‚ôÄÔ∏è","üö¥","üö¥‚Äç‚ôÇÔ∏è","üèÜ","ü•á","ü•à","ü•â","üèÖ","üéñÔ∏è","üèµÔ∏è","üéóÔ∏è","üé´","üéüÔ∏è","üé™","ü§π‚Äç‚ôÄÔ∏è","ü§π","ü§π‚Äç‚ôÇÔ∏è","üé≠","ü©∞","üé®","ü´ü","üé¨","üé§","üéß","üéº","üéπ","ü™á","ü•Å","ü™ò","üé∑","üé∫","ü™ó","üé∏","ü™ï","ü™â","üéª","ü™à","üé≤","‚ôüÔ∏è","üéØ","üé≥","üéÆ","üé∞","üß©",
                                       "üöó","üöï","üöô","üöå","üöé","üèéÔ∏è","üöì","üöë","üöí","üöê","üõª","üöö","üöõ","üöú","ü¶Ø","ü¶Ω","ü¶º","ü©º","üõ¥","üö≤","üõµ","üèçÔ∏è","üõ∫","üõû","üö®","üöî","üöç","üöò","üöñ","üö°","üö†","üöü","üöÉ","üöã","üöû","üöù","üöÑ","üöÖ","üöà","üöÇ","üöÜ","üöá","üöä","üöâ","‚úàÔ∏è","üõ´","üõ¨","üõ©Ô∏è","üí∫","üõ∞Ô∏è","üöÄ","üõ∏","üöÅ","üõ∂","‚õµÔ∏è","üö§","üõ•Ô∏è","üõ≥Ô∏è","‚õ¥Ô∏è","üö¢","üõü","‚öìÔ∏è","ü™ù","‚õΩÔ∏è","üöß","üö¶","üö•","üöè","üó∫Ô∏è","üóø","üóΩ","üóº","üè∞","üèØ","üèüÔ∏è","üé°","üé¢","üé†","‚õ≤Ô∏è","‚õ±Ô∏è","üèñÔ∏è","üèùÔ∏è","üèúÔ∏è","üåã","‚õ∞Ô∏è","üèîÔ∏è","üóª","üèïÔ∏è","‚õ∫Ô∏è","üõñ","üè†","üè°","üèòÔ∏è","üèöÔ∏è","üèóÔ∏è","üè≠","üè¢","üè¨","üè£","üè§","üè•","üè¶","üè®","üè™","üè´","üè©","üíí","üèõÔ∏è","‚õ™Ô∏è","üïå","üïç","üõï","üïã","‚õ©Ô∏è","üõ§Ô∏è","üõ£Ô∏è","üóæ","üéë","üèûÔ∏è","üåÖ","üåÑ","üå†","üéá","üéÜ","üåá","üåÜ","üèôÔ∏è","üåÉ","üåå","üåâ","üåÅ",
                                       "‚åöÔ∏è","üì±","üì≤","üíª","‚å®Ô∏è","üñ•Ô∏è","üñ®Ô∏è","üñ±Ô∏è","üñ≤Ô∏è","üïπÔ∏è","üóúÔ∏è","üíΩ","üíæ","üíø","üìÄ","üìº","üì∑","üì∏","üìπ","üé•","üìΩÔ∏è","üéûÔ∏è","üìû","‚òéÔ∏è","üìü","üì†","üì∫","üìª","üéôÔ∏è","üéöÔ∏è","üéõÔ∏è","üß≠","‚è±Ô∏è","‚è≤Ô∏è","‚è∞","üï∞Ô∏è","‚åõÔ∏è","‚è≥","üì°","üîã","ü™´","üîå","üí°","üî¶","üïØÔ∏è","ü™î","üßØ","üõ¢Ô∏è","üí∏","üíµ","üí¥","üí∂","üí∑","ü™ô","üí∞","üí≥","ü™™","üíé","‚öñÔ∏è","ü™ú","üß∞","ü™õ","üîß","üî®","‚öíÔ∏è","üõ†Ô∏è","‚õèÔ∏è","ü™è","ü™ö","üî©","‚öôÔ∏è","ü™§","üß±","‚õìÔ∏è","‚õìÔ∏è‚Äçüí•","üß≤","üî´","üí£","üß®","ü™ì","üî™","üó°Ô∏è","‚öîÔ∏è","üõ°Ô∏è","üö¨","‚ö∞Ô∏è","ü™¶","‚ö±Ô∏è","üè∫","üîÆ","üìø","üßø","ü™¨","üíà","‚öóÔ∏è","üî≠","üî¨","üï≥Ô∏è","ü©ª","ü©π","ü©∫","üíä","üíâ","ü©∏","üß¨","ü¶†","üß´","üß™","üå°Ô∏è","üßπ","ü™†","üß∫","üßª","üöΩ","üö∞","üöø","üõÅ","üõÄ","üßº","ü™•","ü™í","ü™Æ","üßΩ","ü™£","üß¥","üõéÔ∏è","üîë","üóùÔ∏è","üö™","ü™ë","üõãÔ∏è","üõèÔ∏è","üõå","üß∏","ü™Ü","üñºÔ∏è","ü™û","ü™ü","üõçÔ∏è","üõí","üéÅ","üéà","üéè","üéÄ","ü™Ñ","ü™Ö","üéä","üéâ","üéé","ü™≠","üèÆ","üéê","ü™©","üßß","‚úâÔ∏è","üì©","üì®","üìß","üíå","üì•","üì§","üì¶","üè∑Ô∏è","ü™ß","üì™","üì´","üì¨","üì≠","üìÆ","üìØ","üìú","üìÉ","üìÑ","üìë","üßæ","üìä","üìà","üìâ","üóíÔ∏è","üóìÔ∏è","üìÜ","üìÖ","üóëÔ∏è","üìá","üóÉÔ∏è","üó≥Ô∏è","üóÑÔ∏è","üìã","üìÅ","üìÇ","üóÇÔ∏è","üóûÔ∏è","üì∞","üìì","üìî","üìí","üìï","üìó","üìò","üìô","üìö","üìñ","üîñ","üß∑","üîó","üìé","üñáÔ∏è","üìê","üìè","üßÆ","üìå","üìç","‚úÇÔ∏è","üñäÔ∏è","üñãÔ∏è","‚úíÔ∏è","üñåÔ∏è","üñçÔ∏è","üìù","‚úèÔ∏è","üîç","üîé","üîè","üîê","üîí","üîì",
                                       "ü©∑","‚ù§Ô∏è","üß°","üíõ","üíö","ü©µ","üíô","üíú","üñ§","ü©∂","ü§ç","ü§é","üíî","‚ù§Ô∏è‚Äçüî•","‚ù§Ô∏è‚Äçü©π","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚òÆÔ∏è","‚úùÔ∏è","‚ò™Ô∏è","üïâÔ∏è","‚ò∏Ô∏è","ü™Ø","‚ú°Ô∏è","üîØ","üïé","‚òØÔ∏è","‚ò¶Ô∏è","üõê","‚õé","‚ôàÔ∏è","‚ôâÔ∏è","‚ôäÔ∏è","‚ôãÔ∏è","‚ôåÔ∏è","‚ôçÔ∏è","‚ôéÔ∏è","‚ôèÔ∏è","‚ôêÔ∏è","‚ôëÔ∏è","‚ôíÔ∏è","‚ôìÔ∏è","üÜî","‚öõÔ∏è","üâë","‚ò¢Ô∏è","‚ò£Ô∏è","üì¥","üì≥","üà∂","üàöÔ∏è","üà∏","üà∫","üà∑Ô∏è","‚ú¥Ô∏è","üÜö","üíÆ","üâê","„äôÔ∏è","„äóÔ∏è","üà¥","üàµ","üàπ","üà≤","üÖ∞Ô∏è","üÖ±Ô∏è","üÜé","üÜë","üÖæÔ∏è","üÜò","‚ùå","‚≠ïÔ∏è","üõë","‚õîÔ∏è","üìõ","üö´","üíØ","üí¢","‚ô®Ô∏è","üö∑","üöØ","üö≥","üö±","üîû","üìµ","üö≠","‚ùóÔ∏è","‚ùï","‚ùì","‚ùî","‚ÄºÔ∏è","‚ÅâÔ∏è","üîÖ","üîÜ","„ÄΩÔ∏è","‚ö†Ô∏è","üö∏","üî±","‚öúÔ∏è","üî∞","‚ôªÔ∏è","‚úÖ","üàØÔ∏è","üíπ","‚ùáÔ∏è","‚ú≥Ô∏è","‚ùé","üåê","üí†","‚ìÇÔ∏è","üåÄ","üí§","üèß","üöæ","‚ôøÔ∏è","üÖøÔ∏è","üõó","üà≥","üàÇÔ∏è","üõÇ","üõÉ","üõÑ","üõÖ","üõú","üöπ","üö∫","üöº","üßë‚Äçüßë‚Äçüßí","üßë‚Äçüßë‚Äçüßí‚Äçüßí","üßë‚Äçüßí","üßë‚Äçüßí‚Äçüßí","‚ößÔ∏è","üöª","üöÆ","üé¶","üì∂","üàÅ","üî£","‚ÑπÔ∏è","üî§","üî°","üî†","üÜñ","üÜó","üÜô","üÜí","üÜï","üÜì","0Ô∏è‚É£","1Ô∏è‚É£","2Ô∏è‚É£","3Ô∏è‚É£","4Ô∏è‚É£","5Ô∏è‚É£","6Ô∏è‚É£","7Ô∏è‚É£","8Ô∏è‚É£","9Ô∏è‚É£","üîü","üî¢","#Ô∏è‚É£","*Ô∏è‚É£","‚èèÔ∏è","‚ñ∂Ô∏è","‚è∏Ô∏è","‚èØÔ∏è","‚èπÔ∏è","‚è∫Ô∏è","‚è≠Ô∏è","‚èÆÔ∏è","‚è©Ô∏è","‚è™Ô∏è","‚è´Ô∏è","‚è¨Ô∏è","‚óÄÔ∏è","üîº","üîΩ","‚û°Ô∏è","‚¨ÖÔ∏è","‚¨ÜÔ∏è","‚¨áÔ∏è","‚ÜóÔ∏è","‚ÜòÔ∏è","‚ÜôÔ∏è","‚ÜñÔ∏è","‚ÜïÔ∏è","‚ÜîÔ∏è","‚Ü™Ô∏è","‚Ü©Ô∏è","‚§¥Ô∏è","‚§µÔ∏è","üîÄ","üîÅ","üîÇ","üîÑ","üîÉ","üéµ","üé∂","‚ûï","‚ûñ","‚ûó","‚úñÔ∏è","üü∞","‚ôæÔ∏è","üí≤","üí±","‚Ñ¢Ô∏è","¬©Ô∏è","¬ÆÔ∏è","üëÅÔ∏è‚Äçüó®Ô∏è","üîö","üîô","üîõ","üîù","üîú","„Ä∞Ô∏è","‚û∞","‚ûø","‚úîÔ∏è","‚òëÔ∏è","üîò","üî¥","üü†","üü°","üü¢","üîµ","üü£","‚ö´Ô∏è","‚ö™Ô∏è","üü§","üî∫","üîª","üî∏","üîπ","üî∂","üî∑","üî≥","üî≤","‚ñ™Ô∏è","‚ñ´Ô∏è","‚óæÔ∏è","‚óΩÔ∏è","‚óºÔ∏è","‚óªÔ∏è","üü•","üüß","üü®","üü©","üü¶","üü™","‚¨õÔ∏è","‚¨úÔ∏è","üü´","üîà","üîá","üîâ","üîä","üîî","üîï","üì£","üì¢","üí¨","üí≠","üóØÔ∏è","‚ô†Ô∏è","‚ô£Ô∏è","‚ô•Ô∏è","‚ô¶Ô∏è","üÉè","üé¥","üÄÑÔ∏è","üïê","üïë","üïí","üïì","üïî","üïï","üïñ","üïó","üïò","üïô","üïö","üïõ","üïú","üïù","üïû","üïü","üï†","üï°","üï¢","üï£","üï§","üï•","üè≥Ô∏è","üè¥","üè¥‚Äç‚ò†Ô∏è","üèÅ","üö©","üá∫üá≥","üá¶üá´","üá¶üáΩ","üá¶üá±","üá©üáø","üá¶üá∏","üá¶üá©","üá¶üá¥","üá¶üáÆ","üá¶üá∂","üá¶üá¨","üá¶üá∑","üá¶üá≤","üá¶üáº","üá¶üá∫","üá¶üáπ","üá¶üáø","üáßüá∏","üáßüá≠","üáßüá©","üáßüáß","üáßüáæ","üáßüá™","üáßüáø","üáßüáØ","üáßüá≤","üáßüáπ","üáßüá¥","üáßüá¶","üáßüáº","üáßüá∑","üáªüá¨","üáßüá≥","üáßüá¨","üáßüá´","üáßüáÆ","üá∞üá≠","üá®üá≤","üá®üá¶","üáÆüá®","üá®üáª","üáßüá∂","üá∞üáæ","üá®üá´","üáπüá©","üáÆüá¥","üá®üá±","üá®üá≥","üá®üáΩ","üá®üá®","üá®üá¥","üá∞üá≤","üá®üá¨","üá®üá©","üá®üá∞","üá®üá∑","üá®üáÆ","üá≠üá∑","üá®üá∫","üá®üáº","üá®üáæ","üá®üáø","üá©üá∞","üá©üáØ","üá©üá≤","üá©üá¥","üá™üá®","üá™üá¨","üá∏üáª","üá¨üá∂","üá™üá∑","üá™üá™","üá∏üáø","üá™üáπ","üá™üá∫","üá´üá∞","üá´üá¥","üá´üáØ","üá´üáÆ","üá´üá∑","üá¨üá´","üáµüá´","üáπüá´","üá¨üá¶","üá¨üá≤","üá¨üá™","üá©üá™","üá¨üá≠","üá¨üáÆ","üá¨üá∑","üá¨üá±","üá¨üá©","üá¨üáµ","üá¨üá∫","üá¨üáπ","üá¨üá¨","üá¨üá≥","üá¨üáº","üá¨üáæ","üá≠üáπ","üá≠üá≥","üá≠üá∞","üá≠üá∫","üáÆüá∏","üáÆüá≥","üáÆüá©","üáÆüá∑","üáÆüá∂","üáÆüá™","üáÆüá≤","üáÆüá±","üáÆüáπ","üáØüá≤","üáØüáµ","üéå","üáØüá™","üáØüá¥","üá∞üáø","üá∞üá™","üá∞üáÆ","üá∞üáº","üá∞üá¨","üá±üá¶","üá±üáª","üá±üáß","üá±üá∏","üá±üá∑","üá±üáæ","üá±üáÆ","üá±üáπ","üá±üá∫","üá≤üá¥","üá≤üá¨","üá≤üáº","üá≤üáæ","üá≤üáª","üá≤üá±","üá≤üáπ","üá≤üá≠","üá≤üá∂","üá≤üá∑","üá≤üá∫","üáæüáπ","üá≤üáΩ","üá´üá≤","üá≤üá©","üá≤üá®","üá≤üá≥","üá≤üá™","üá≤üá∏","üá≤üá¶","üá≤üáø","üá≤üá≤","üá≥üá¶","üá≥üá∑","üá≥üáµ","üá≥üá±","üá≥üá®","üá≥üáø","üá≥üáÆ","üá≥üá™","üá≥üá¨","üá≥üá∫","üá≥üá´","üá¥üá≤","üáµüá∞","üáµüáº","üáµüá∏","üáµüá¶","üáµüá¨","üáµüáæ","üáµüá™","üáµüá≠","üáµüá±","üáµüáπ","üáµüá∑","üá∂üá¶","üá∑üá™","üá∑üá¥","üá∑üá∫","üá∑üáº","üáºüá∏","üá∏üá≤","üá∏üáπ","üá∏üá¶","üá∏üá≥","üá∑üá∏","üá∏üá∏","üá∏üá±","üá∏üá¨","üá∏üáΩ","üá∏üá∞","üá∏üáÆ","üá¨üá∏","üá∏üáß","üá∏üá¥","üáøüá¶","üá∞üá∑","üá±üá∞","üáßüá±","üá∏üá≠","üá∞üá≥","üá±üá®","üáµüá≤","üáªüá®","üá∏üá©","üá∏üá∑","üá∏üá™","üá®üá≠","üá∏üáæ","üáπüáº","üáπüáØ","üáπüáø","üáπüá≠","üáπüá±","üáπüá¨","üáπüá∞","üáπüá¥","üáπüáπ","üáπüá≥","üáπüá∑","üáπüá≤","üáπüá®","üáπüáª","üáªüáÆ","üá∫üá¨","üá∫üá¶","üá¶üá™","üá¨üáß","üá∫üá∏","üá∫üáæ","üá∫üáø","üáªüá∫","üáªüá¶","üáªüá™","üáªüá≥","üáºüá´","üá™üá≠","üáæüá™","üáøüá≤","üáøüáº"]
    
    var body: some View {
        ZStack {
            Color(.systemGroupedBackground).ignoresSafeArea()
            
            ScrollView {
                VStack(spacing: 22) {
                    HStack {
                        Spacer()
                        Button("Cancel") { dismiss() }
                            .foregroundColor(Color(red: 0.58, green: 0.71, blue: 0.91))
                    }
                    .padding(.horizontal)
                    .padding(.top, 12)
                    
                    VStack(alignment: .leading, spacing: 6) {
                        Text("Add a New Habit")
                            .font(.system(size: 28, weight: .bold))
                        Text("Habit Name and Icon")
                            .font(.headline)
                            .fontWeight(.bold)
                            .padding(.top, 68.0)
                    }
                    .frame(maxWidth: .infinity, alignment: .leading)
                    .padding(.horizontal)
                    
                    WhiteRow {
                        HStack {
                            TextField("Enter habit name", text: $habitName)
                                .font(.system(size: 18))
                            Spacer()
                            Button(action: {
                                withAnimation { isEditingEmoji.toggle() }
                            }) {
                                ZStack {
                                    Circle()
                                        .fill(Color.white)
                                        .frame(width: 40, height: 40)
                                        .shadow(color: Color.black.opacity(0.1), radius: 3, x: 0, y: 2)
                                    Text(selectedEmoji)
                                        .font(.system(size: 22))
                                }
                            }
                        }
                        .padding(.horizontal, 4)
                    }
                    
                    if isEditingEmoji {
                        WhiteRow {
                            ScrollView(.vertical, showsIndicators: true) {
                                let columns = Array(repeating: GridItem(.flexible(minimum: 32, maximum: 44), spacing: 8), count: 8)
                                LazyVGrid(columns: columns, spacing: 10) {
                                    ForEach(allEmojis, id: \.self) { emoji in
                                        Button(action: {
                                            selectedEmoji = emoji
                                            withAnimation { isEditingEmoji = false }
                                        }) {
                                            Text(emoji)
                                                .font(.system(size: 26))
                                                .frame(width: 36, height: 36)
                                        }
                                        .buttonStyle(.plain)
                                    }
                                }
                                .padding(.vertical, 8)
                            }
                            .frame(maxHeight: 220)
                        }
                        .padding(.horizontal)
                    }
                    
                    WhiteRow {
                        HStack {
                            IconCircle(systemName: "play.fill")
                            Text("Starting From")
                                .font(.system(size: 16))
                            Spacer()
                            Button(action: {
                                withAnimation { showDatePicker.toggle() }
                            }) {
                                Text(startDate, format: .dateTime.day().month().year())
                                    .foregroundColor(.gray)
                                    .font(.system(size: 16))
                                    .padding(.vertical, 6)
                                    .padding(.horizontal, 12)
                                    .background(Color(.systemGray5))
                                    .clipShape(Capsule())
                            }
                        }
                    }
                    
                    if showDatePicker {
                        WhiteRow {
                            DatePicker("", selection: $startDate, displayedComponents: [.date])
                                .datePickerStyle(.graphical)
                                .labelsHidden()
                        }
                        .padding(.horizontal)
                    }
                    
                    WhiteRow {
                        HStack {
                            IconCircle(systemName: "flame.fill")
                            Text("Your streak")
                                .font(.system(size: 16))
                            Spacer()
                            HStack(spacing: 8) {
                                Button(action: { if streak > 1 { streak -= 1 } }) {
                                    Image(systemName: "minus")
                                        .foregroundColor(.black)
                                        .frame(width: 36, height: 36)
                                        .background(Color(.systemGray5))
                                        .clipShape(RoundedRectangle(cornerRadius: 10))
                                }
                                Text("\(streak)")
                                    .font(.system(size: 16, weight: .semibold))
                                    .frame(width: 44, height: 36)
                                    .background(Color(.systemGray6))
                                    .clipShape(RoundedRectangle(cornerRadius: 10))
                                Button(action: { streak += 1 }) {
                                    Image(systemName: "plus")
                                        .foregroundColor(.black)
                                        .frame(width: 36, height: 36)
                                        .background(Color(.systemGray5))
                                        .clipShape(RoundedRectangle(cornerRadius: 10))
                                }
                            }
                        }
                    }
                    
                    WhiteRow {
                        HStack {
                            IconCircle(systemName: "bell.fill")
                            Text("Daily Notification")
                                .font(.system(size: 16))
                            Spacer()
                            Toggle("", isOn: $dailyNotification)
                                .labelsHidden()
                                .fixedSize()
                        }
                    }
                    
                    if dailyNotification {
                        WhiteRow {
                            DatePicker("", selection: $notificationTime, displayedComponents: [.hourAndMinute])
                                .frame(width: 49.499, height: 3.0)
                                .datePickerStyle(.compact)
                                .labelsHidden()
                        }
                        .padding(.horizontal)
                    }
                    
                    Text("Great Note : 70 streaks is the best!")
                        .font(.system(size: 12, weight: .semibold))
                        .fontWeight(.light)
                        .foregroundColor(.black)
                        .padding(.vertical, 10)
                    
                    Button(action: {
                        habits.append(Habit(name: habitName, emoji: selectedEmoji, progress: 0, goal: streak))
                        habitName = ""
                        streak = 1
                        dailyNotification = false
                        dismiss()
                    }) {
                        Text("Save")
                            .font(.system(size: 18, weight: .semibold))
                            .frame(maxWidth: .infinity)
                            .padding()
                            .background(Color(red: 0.58, green: 0.71, blue: 0.91))
                            .foregroundColor(.white)
                            .clipShape(RoundedRectangle(cornerRadius: 61))
                    }
                    .padding(.horizontal)
                    .padding(.top, 20)
                }
                .padding(.horizontal)
            }
        }
        .navigationBarBackButtonHidden(true)
    }
}

// ==============================
// ŸÖŸÉŸàŸÜ ÿµŸÅ ÿ£ÿ®Ÿäÿ∂ ŸÖÿπ ÿ∏ŸÑ
// ==============================
struct WhiteRow<Content: View>: View {
    let content: Content
    init(@ViewBuilder content: () -> Content) {
        self.content = content()
    }
    var body: some View {
        HStack {
            content
        }
        .padding(.horizontal)
        .padding(.vertical, 17)
        .background(Color.white)
        .cornerRadius(50)
        .shadow(color: Color.black.opacity(0.20), radius: 5, x: 0, y: 3)
    }
}

// ==============================
// ŸÖŸÉŸàŸÜ ÿØÿßÿ¶ÿ±ÿ© ÿ£ŸäŸÇŸàŸÜÿ©
// ==============================
struct IconCircle: View {
    let systemName: String
    var body: some View {
        ZStack {
            Circle()
                .fill(Color(.systemGray5))
                .frame(width: 36, height: 36)
            Image(systemName: systemName)
                .foregroundColor(.gray)
                .font(.system(size: 16))
        }
    }
}

// ==============================
// ŸÜŸÇÿ∑ÿ© ÿßŸÑÿ®ÿØÿßŸäÿ© ŸÑŸÑÿ™ÿ∑ÿ®ŸäŸÇ
// ==============================
struct LAApp: App {
    var body: some Scene {
        WindowGroup {
            NView()
        }
    }
}

// ==============================
// ÿ™ÿπÿØŸäŸÑ JView ŸÅŸÇÿ∑ ŸÑÿ•ÿÆŸÅÿßÿ° ÿ≤ÿ± ÿßŸÑÿ®ÿßŸÉ
// ==============================
extension JView {
    var bodyWithoutBackButton: some View {
        self.body
            .navigationBarBackButtonHidden(true)
    }
}

// ==============================
// ŸÖÿπÿßŸäŸÜÿßÿ™ ÿßŸÑŸÉŸàÿØ
// ==============================
#Preview {
    NView()
}
